<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Log.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Helpers.html">Helpers</a><ul class='methods'><li data-type='method'><a href="module-Helpers.html#~time">time</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="CollectionLambdas.html">CollectionLambdas</a><ul class='methods'><li data-type='method'><a href="CollectionLambdas.html#.addClass">addClass</a></li><li data-type='method'><a href="CollectionLambdas.html#.assignAttrValues">assignAttrValues</a></li><li data-type='method'><a href="CollectionLambdas.html#.attr">attr</a></li><li data-type='method'><a href="CollectionLambdas.html#.clear">clear</a></li><li data-type='method'><a href="CollectionLambdas.html#.css">css</a></li><li data-type='method'><a href="CollectionLambdas.html#.empty">empty</a></li><li data-type='method'><a href="CollectionLambdas.html#.remove">remove</a></li><li data-type='method'><a href="CollectionLambdas.html#.removeAttr">removeAttr</a></li><li data-type='method'><a href="CollectionLambdas.html#.removeClass">removeClass</a></li><li data-type='method'><a href="CollectionLambdas.html#.replaceClass">replaceClass</a></li><li data-type='method'><a href="CollectionLambdas.html#.setData">setData</a></li><li data-type='method'><a href="CollectionLambdas.html#.styleInline">styleInline</a></li><li data-type='method'><a href="CollectionLambdas.html#.toggleAttr">toggleAttr</a></li><li data-type='method'><a href="CollectionLambdas.html#.toggleClass">toggleClass</a></li><li data-type='method'><a href="CollectionLambdas.html#.toggleStyleFragments">toggleStyleFragments</a></li><li data-type='method'><a href="CollectionLambdas.html#.visible">visible</a></li></ul></li><li><a href="ExtendedNodelistLambdas.html">ExtendedNodelistLambdas</a><ul class='methods'><li data-type='method'><a href="ExtendedNodelistLambdas.html#.append">append</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.appendTo">appendTo</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.delegate">delegate</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.each">each</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.find">find</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.find$">find$</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.first">first</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.first$">first$</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.getData">getData</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.hasClass">hasClass</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.html">html</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.htmlFor">htmlFor</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.insert">insert</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.is">is</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.isEmpty">isEmpty</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.on">on</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.ON">ON</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.outerHtml">outerHtml</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.prop">prop</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.replace">replace</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.single">single</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.text">text</a></li><li data-type='method'><a href="ExtendedNodelistLambdas.html#.val">val</a></li></ul></li><li><a href="ExtensionHelpers.html">ExtensionHelpers</a><ul class='methods'><li data-type='method'><a href="ExtensionHelpers.html#.getAllDataAttributeValues">getAllDataAttributeValues</a></li><li data-type='method'><a href="ExtensionHelpers.html#.hex2Full">hex2Full</a></li><li data-type='method'><a href="ExtensionHelpers.html#.hex2RGBA">hex2RGBA</a></li><li data-type='method'><a href="ExtensionHelpers.html#.initializePrototype">initializePrototype</a></li><li data-type='method'><a href="ExtensionHelpers.html#.isVisible">isVisible</a></li><li data-type='method'><a href="ExtensionHelpers.html#.loop">loop</a></li></ul></li><li><a href="ExtensionHelpers_HandlerFactory.html">ExtensionHelpers/HandlerFactory</a><ul class='methods'><li data-type='method'><a href="ExtensionHelpers_HandlerFactory.html#.addListenerIfNotExisting">addListenerIfNotExisting</a></li><li data-type='method'><a href="ExtensionHelpers_HandlerFactory.html#.createHandlerForHID">createHandlerForHID</a></li><li data-type='method'><a href="ExtensionHelpers_HandlerFactory.html#.metaHandler">metaHandler</a></li></ul></li><li><a href="JQL.html">JQL</a><ul class='methods'><li data-type='method'><a href="JQL.html#.ExtendedNodeList">ExtendedNodeList</a></li><li data-type='method'><a href="JQL.html#.setStyle">setStyle</a></li><li data-type='method'><a href="JQL.html#.virtual">virtual</a></li></ul></li><li><a href="JQL_DOM.html">JQL/DOM</a><ul class='methods'><li data-type='method'><a href="JQL_DOM.html#.htmlToVirtualElement">htmlToVirtualElement</a></li></ul></li><li><a href="JQL_ExternalStyling.html">JQL/ExternalStyling</a><ul class='methods'><li data-type='method'><a href="JQL_ExternalStyling.html#.changeCssStyleRule">changeCssStyleRule</a></li></ul></li><li><a href="JQL_HTMLHelpers.html">JQL/HTMLHelpers</a><ul class='methods'><li data-type='method'><a href="JQL_HTMLHelpers.html#.setTagPermission">setTagPermission</a></li></ul></li><li><a href="JQL_HTMLHelpers_AllowUnknown.html">JQL/HTMLHelpers/AllowUnknown</a><ul class='methods'><li data-type='method'><a href="JQL_HTMLHelpers_AllowUnknown.html#.off">off</a></li><li data-type='method'><a href="JQL_HTMLHelpers_AllowUnknown.html#.on">on</a></li></ul></li><li><a href="JQL_Log.html">JQL/Log</a><ul class='methods'><li data-type='method'><a href="JQL_Log.html#.log">log</a></li><li data-type='method'><a href="JQL_Log.html#.setStyling4Log">setStyling4Log</a></li></ul></li><li><a href="JQL_Log_debugLog.html">JQL/Log/debugLog</a><ul class='methods'><li data-type='method'><a href="JQL_Log_debugLog.html#.hide">hide</a></li><li data-type='method'><a href="JQL_Log_debugLog.html#.isVisible">isVisible</a></li><li data-type='method'><a href="JQL_Log_debugLog.html#.off">off</a></li><li data-type='method'><a href="JQL_Log_debugLog.html#.on">on</a></li><li data-type='method'><a href="JQL_Log_debugLog.html#.show">show</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Log.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// noinspection JSValidateJSDoc

/**
 * Static JQL extension method. A small log library for JQL debugging purposes.
 * @namespace JQL/Log
 */

import {createElementFromHtmlString, } from "./DOM.js";
import setStyle from "./Styling.js";
import {time} from "./Helpers.js";
import {isVisible} from "./ExtensionHelpers.js";

/**
 * defaultStyling is the styling used for a the box used for logging (a &lt;code>HTMLFieldSetElement&lt;/code> element).
 * May be overridden by your own styles, but must use the id &lt;code>#logBox&lt;/code>.
 * @memberof JQL/Log
 */
let defaultStyling = {
  "#logBox": {
    border: `1px dotted rgb(153, 153, 153)`,
    height: `25vh`,
    width: `90vw`,
    overflow: `auto`,
    zIndex: 5,
    display: `none`,
  },
  "#logBox.visible": {
    display: `initial`,
  },
  "#logBox legend": {
    textAlign: `center`,
    backgroundColor: `rgb(119, 119, 119)`,
    padding: `2px 5px`,
    marginTop: `-0.8rem`,
    marginBottom: `-0.5rem`,
    left: `50%`,
    right: `50%`,
    color: `white`,
    font: `normal 12px/15px verdana, arial`,
  },
};
let useLogging = false;
/**
 * Add style classes for the log box to a custom css style element. Exposed as &lt;code>JQL.setStyling4Log&lt;/code>
 * @memberof JQL/Log
 * @param styles {Object} style rules Object, e.g. &lt;code>&amp;#123;margin: `0`, color: `green`&amp;#125;&lt;/code>.
 * Default styles are in &lt;code>defaultStyling&lt;/code>
 * @param cssId {string} the id of the custom style element (automagically created in the
 * header of the document in which JQL is used). Default is 'JQLCustomCSS'.
 */
const setStyling4Log = (styles = defaultStyling, cssId = `JQLCustomCSS`) => {
  const exists = document.querySelector(`#JQLCustomCSS`);
  // this triggers rename (id) of existing stylesheet
  if (exists) { exists.id = cssId; }
    Object.entries(styles).forEach(([selector, style]) => setStyle(selector, style, cssId));
};

let useHtml = false;

/** @namespace JQL/Log/debugLog */
/**
 * Use logging for debug (set on/off or show/hide the log box), exposed as &lt;code>JQL.debugLog&lt;/code>
 * @memberof JQL/debugLog
 */
const debugLog = {
  /**
   * Is the log box visible?
   * @memberof JQL/Log/debugLog
   */
  isVisible() {
    const logBox = document.querySelector(`#logBox`);
    return logBox &amp;&amp; isVisible(logBox);
  },
  /**
   * Activate logging for JQL.
   * @memberof JQL/Log/debugLog
   */
  on() {
    useLogging = true;
    document.querySelector(`#logBox`).classList.add(`visible`);
    log(`Logging started`);
  },
  /**
   * Deactivate logging for JQL.
   * @memberof JQL/Log/debugLog
   */
  off() {
    log(`Logging stopped`);
    document.querySelector(`#logBox`).classList.remove(`visible`);
    useLogging = false;
  },
  /**
   * Hide the log box.
   * @memberof JQL/Log/debugLog
   */
  hide() {
    const logBox = document.querySelector(`#logBox`);
    if (logBox) {
      document.querySelector(`#logBox`).classList.remove(`visible`);
    }
  },
  /**
   * Show the log box.
   * @memberof JQL/Log/debugLog
   */
  show() {
    const logBox = document.querySelector(`#logBox`);
    if (logBox) {
      document.querySelector(`#logBox`).classList.add(`visible`);
    }
  },
};

const createLogElement = () => {
  const loggingFieldSet = `
          &lt;fieldset id="logBox">
            &lt;legend>Logging&lt;/legend>
            &lt;${useHtml ? `div` : `pre`} id="jql_logger">&lt;/pre>
          &lt;/fieldset>`;
  document.body.insertBefore(createElementFromHtmlString(loggingFieldSet, document.body), document.body.childNodes[0]);
  return document.querySelector(`#jql_logger`);
};

const logBox = document.querySelector("#jql_logger") || createLogElement();

/**
 * Create log entry/entries, preceded with the time of logging (millisecond granularity).
 * &lt;br>Exposed as &lt;code>JQL.log&lt;/code>
 * &lt;br>If the local [useLogging] boolean is false, nothing is logged
 * @memberof JQL/Log
 * @param args {...(string|Object)} string(s) or Object(s) to print in the log box
 * * &lt;br>&lt;b>Note&lt;/b> Objects are converted to JSON representation
 */
const log = (...args) => {
    if (!useLogging) { return; }
    const logLine = arg => `${arg instanceof Object ? JSON.stringify(arg, null, 2) : arg}\n`;
    args.forEach( arg => 
      logBox.insertAdjacentHTML(
        `afterbegin`,
        `${time()} ${logLine(arg)}`)
    );
};

const logStatus = () => useLogging;
export { log, debugLog, logStatus, setStyling4Log };</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Wed Sep 29 2021 14:00:53 GMT+0200 (Midden-Europese zomertijd) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
