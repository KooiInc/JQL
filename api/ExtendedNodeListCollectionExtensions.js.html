<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>ExtendedNodeListCollectionExtensions.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-DOM.html">DOM</a><ul class='methods'><li data-type='method'><a href="module-DOM.html#~createElementFromHtmlString">createElementFromHtmlString</a></li><li data-type='method'><a href="module-DOM.html#~element2DOM">element2DOM</a></li><li data-type='method'><a href="module-DOM.html#~htmlToVirtualElement">htmlToVirtualElement</a></li></ul></li><li><a href="module-ExtendedNodeListCollectionExtensions.html">ExtendedNodeListCollectionExtensions</a><ul class='methods'><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~addClass">addClass</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~assignAttrValues">assignAttrValues</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~attr">attr</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~clear">clear</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~css">css</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~empty">empty</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~hide">hide</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~remove">remove</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~removeAttr">removeAttr</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~removeClass">removeClass</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~replaceClass">replaceClass</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~setData">setData</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~show">show</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~styleInline">styleInline</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~toggleAttr">toggleAttr</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~toggleClass">toggleClass</a></li><li data-type='method'><a href="module-ExtendedNodeListCollectionExtensions.html#~toggleStyleFragments">toggleStyleFragments</a></li></ul></li><li><a href="module-ExtendedNodeListExtensions.html">ExtendedNodeListExtensions</a><ul class='methods'><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~append">append</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~appendTo">appendTo</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~delegate">delegate</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~each">each</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~find">find</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~find$">find$</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~first">first</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~first$">first$</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~getData">getData</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~hasClass">hasClass</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~html">html</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~htmlFor">htmlFor</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~insert">insert</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~is">is</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~isEmpty">isEmpty</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~on">on</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~ON">ON</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~outerHtml">outerHtml</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~parent">parent</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~prop">prop</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~replace">replace</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~replaceMe">replaceMe</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~single">single</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~text">text</a></li><li data-type='method'><a href="module-ExtendedNodeListExtensions.html#~val">val</a></li></ul></li><li><a href="module-ExtensionHelpers.html">ExtensionHelpers</a><ul class='methods'><li data-type='method'><a href="module-ExtensionHelpers.html#~getAllDataAttributeValues">getAllDataAttributeValues</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~HandlerFactory">HandlerFactory</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~HandlerFactory/addListenerIfNotExisting">HandlerFactory/addListenerIfNotExisting</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~HandlerFactory/createHandlerForHID">HandlerFactory/createHandlerForHID</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~HandlerFactory/factoryReturnValue">HandlerFactory/factoryReturnValue</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~HandlerFactory/metaHandler">HandlerFactory/metaHandler</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~hex2Full">hex2Full</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~hex2RGBA">hex2RGBA</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~initializePrototype">initializePrototype</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~isVisible">isVisible</a></li><li data-type='method'><a href="module-ExtensionHelpers.html#~loop">loop</a></li></ul></li><li><a href="module-Helpers.html">Helpers</a><ul class='methods'><li data-type='method'><a href="module-Helpers.html#~time">time</a></li></ul></li><li><a href="module-HtmlCleanup.html">HtmlCleanup</a><ul class='methods'><li data-type='method'><a href="module-HtmlCleanup.html#~setTagPermission">setTagPermission</a></li></ul></li><li><a href="module-JQL.html">JQL</a><ul class='methods'><li data-type='method'><a href="module-JQL.html#~ExtendedNodeList">ExtendedNodeList</a></li><li data-type='method'><a href="module-JQL.html#~setStyle">setStyle</a></li><li data-type='method'><a href="module-JQL.html#~virtual">virtual</a></li></ul></li><li><a href="module-Log.html">Log</a><ul class='methods'><li data-type='method'><a href="module-Log.html#~log">log</a></li><li data-type='method'><a href="module-Log.html#~setStyling4Log">setStyling4Log</a></li></ul></li><li><a href="module-Styling.html">Styling</a><ul class='methods'><li data-type='method'><a href="module-Styling.html#~changeCssStyleRule">changeCssStyleRule</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">ExtendedNodeListCollectionExtensions.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// noinspection JSUnusedLocalSymbols,JSCheckFunctionSignatures,JSValidateJSDoc,JSUnresolvedVariable
// noinspection JSUnresolvedVariable

import {hex2RGBA} from "./ExtensionHelpers.js";
import {isObjectAndNotArray,} from "./Helpers.js"
import setStyle from "./Styling.js";

//#region collection lambda'style
/**
 * @module
 * @description These lambda functions will be used to loop through every element
 * of an ExendedNodelist instance. The loop always returns the instance, so
 * every instance method is chainable.
 * &lt;p>&lt;b>Notes&lt;/b>&lt;/p>&lt;ul>
 *  &lt;li>All methods are &lt;i>chainable&lt;/i>.
 *  &lt;li>&lt;code>(implicit)&lt;/code> means the parameter should not be provided in the caller
 *  &lt;br>so: &lt;code>[instance].toggleClass(&lt;s>someHTMLElement,&lt;/s> `someClass`)&lt;/code>
 *  &lt;/ul>
 * @example
 * // presume $ is the alias for ExtendedNodeList
 * $(`.shouldBeRed`)
 *   .css({color: red})
 *   .setData({isRed: `yes`});
 * // so, every element with className `shouldBeRed` within
 * // the instance collection will be styled inline (with red color)
 * // and it will contain a data-attribute [data-is-red="yes"]
 */

/**
 * toggle className (on/off) of all elements of the collection
 * of the ExtendedNodeList instance
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param className {string} the class name to toggle (eg 'hidden')
 */
const toggleClass = (el, className) => {
  el.classList.toggle(className);
};

/**
 * toggle individual style properties for all elements of the collection
 * of the ExtendedNodeList instance
 * properties must be key-value pairs
 * Note: this may fail, because browsers may reformat
 * style values in their own way. See the color stuff
 * for example. Use rgba if you want to toggle opacity
 * for a color too
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param keyValuePairs {Object} e.g. &amp;#123;marginRight: '12px'&amp;#125;
 */
const toggleStyleFragments = (el, keyValuePairs) =>
  el &amp;&amp; Object.entries(keyValuePairs).forEach(([key, value]) => {
    if (value instanceof Function) {
      value = value(el);
    }

    if (/color/i.test(key)) {
      value = value.startsWith(`#`)
        ? hex2RGBA(value)
        : value.replace(/(,|,\s{2,})(\w)/g, (...args) => `, ${args[2]}`);
    }

    el.style[key] = `${el.style[key]}` === `${value}` ? "" : value;
  });

/**
 * Remove some attribute from all elements of the collection
 * of the ExtendedNodeList instance
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param name {string} the attribute name
 */
const removeAttr = (el, name) => el &amp;&amp; el.removeAttribute(name);

/**
 * Toggle attribute [name] with [value] for all elements of the collection
 * of the ExtendedNodeList instance
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param name {string} attribute name (e.g. 'title')
 * @param value {string} attribute value to set
 */
const toggleAttr = (el, name, value) =>
  el &amp;&amp; el.hasAttribute(name)
    ? el.removeAttribute(name)
    : el.setAttribute(name, value);

/**
 * remove content for all elements of the collection
 * of the ExtendedNodeList instance

 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 */
const empty = el => el &amp;&amp; (el.textContent = "");

/**
 * alias for empty
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 */
const clear = el => empty(el);

/**
 * swap [classname] with [...nwClassnames] of all elements of the collection
 * of the ExtendedNodeList instance
 * enables replacing a class name with one or more class name(s)
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param className {string} the className to replace
 * @param nwClassNames {...string} the class name(s) to replace [className] with
 */
const replaceClass = (el, className, ...nwClassNames) => {
  console.log(className, nwClassNames);
  el.classList.remove(className);
  nwClassNames.forEach(name => el.classList.add(name));
}

/**
 * remove all elements of the collection
 * of the ExtendedNodeList instance from the DOM tree
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 */
const remove = el => el.remove();

/**
 * remove [classNames] from all elements of the collection
 * of the ExtendedNodeList instance. Class names can be one
 * or more strings

 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param classNames {...string} one or more class names
 */
const removeClass = (el, ...classNames) =>
  classNames.forEach(cn => el.classList.remove(cn));

/**
 * add [classNames] to all elements of the collection
 * of the ExtendedNodeList instance. Class names can be one
 * or more strings
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param classNames {...string} one or more class names
 */
const addClass = (el, ...classNames) =>
  el &amp;&amp; classNames.forEach(cn => el.classList.add(cn));

/**
 * show all elements of a collection
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 */
const show = el => el.style.display = ``;

/**
 * hide all elements of a collection

 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 */
const hide = el => el.style.display = `none`;

//(el, show) => el.style.display = show ? `` : `none`;

/**
 * set data-attribute for all elements of the collection
 * of the ExtendedNodeList instance.
 * attributes must be key-value pairs
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param keyValuePairs {Object} Object e.g. &amp;#123;isSet: 'true'&amp;#125;
 * &lt;br>&lt;b>Note&lt;/b> do &lt;i>not&lt;/i> use dashed keys but camelcase if you
 * need to split up the dataset. &lt;b>wrong&lt;/b>: &lt;code>no-code&lt;/code>, &lt;b>right&lt;/b>: &lt;code>noCode&lt;/code>.
 * The latter will be &lt;i>rendered&lt;/i> as &lt;code>`data-no-code`&lt;/code> in HTML, but not in js-code.
 */
const setData = (el, keyValuePairs) => {
  // noinspection JSValidateTypes
  el &amp;&amp; isObjectAndNotArray(keyValuePairs) &amp;&amp;
  Object.entries(keyValuePairs).forEach(([key, value]) => el.dataset[key] = value);
}

/**
 * Set attribute or property values for all elements of the collection
 * of the ExtendedNodeList instance
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param keyValuePairs {Object} Object e.g. &amp;#123;title: 'I am Groot'&amp;#125;
 */
const assignAttrValues = (el, keyValuePairs) =>
  el &amp;&amp; Object.entries(keyValuePairs).forEach(([key, value]) => {
    if (key.startsWith(`data`)) {
      setData(el, {[key]: value});
    }

    if (key.toLowerCase() === "class") {
      value.split(/\s+/).forEach(v => el.classList.add(`${v}`))
    }

    if (value.constructor === String) {
      el[key] = value;
    }
  });

/**
 * Get or set attributes for all elements of the collection
 * of the ExtendedNodeList instance
 * attributes must be key-value pairs
 * style and data-attributes must also be key-value pairs
 * @param el {HTMLElement} (implicit [ExtendedNodeList instance].collection[i]) an element from the collection
 * @param keyOrObj {string|Object} Object e.g. &amp;#123;color: '#c0c0c0'&amp;#125;
 * @param value {string} some value
 * @returns {*|string}
 */
const attr = (el, keyOrObj, value) => {
  if (!el) {
    return true;
  }

  if (value !== undefined) {
    keyOrObj = {[keyOrObj]: value};
  }

  if (!value &amp;&amp; keyOrObj.constructor === String) {
    return el.getAttribute(keyOrObj);
  }

  Object.entries(keyOrObj).forEach(([key, value]) => {
    const keyCompare = key.toLowerCase().trim();

    if (keyCompare === `style`) {
      return css(el, value, undefined);
    }

    if (keyCompare === `data`) {
      return setData(el, value);
    }

    if (value instanceof Object) {
      return assignAttrValues(el, value);
    }

    return el.setAttribute(key, value);
  });
}

/**
 * Style the elements of the collection of an ExtendedNodeList instance &lt;i>inline&lt;/i>,
 * so &lt;code>&amp;lt;div style="[the style from parameters]">&lt;/code>.
 * Preferably use key-value pairs
 * @param el {HTMLElement} (implicit) current ExtendedNodeList instance
 * @param keyOrKvPairs {Object|string} Object e.g. &lt;code>&amp;#123;marginRight: '12px'&amp;#125&lt;/code>,
 * or string e.g. &lt;code>"marginRight"&lt;/code>
 * &lt;br>key may be: `paddingRight` or `"padding-right"`
 * @param value {string|undefined} if value is not &lt;code>undefined&lt;/code>,
 * keyOrKvPairs should be a string too
 * &lt;br>If the value should be empty (reset: e.g. &lt;code>padding: ""&lt;/code>), use a dash "-"
 * @returns {ExtendedNodeList|string} ExtendedNodeList instance, so chainable
 */
const styleInline = (el, keyOrKvPairs, value) => {
  if (value &amp;&amp; keyOrKvPairs.constructor === String) {
    keyOrKvPairs = {[keyOrKvPairs]: value || "none"};
  }

  if (!Array.isArray((keyOrKvPairs)) &amp;&amp; keyOrKvPairs.constructor === Object) {
    Object.entries(keyOrKvPairs).forEach(([key, value]) => el.style[key] = value);
  }
};

/**
 * Style the elements of a collection of the ExtendedNodeList
 * instance &lt;i>within a custom style sheet&lt;/i>, using an intermediate class.
 * &lt;br>&lt;b>Note&lt;/b>: the intermediate &lt;code>className&lt;/code> starts with`jQLCreated_`.
 * There will be one intermediate class name per element. Subsequent .css calls will
 * change the rules for that class name.
 * &lt;br>Preferably use key-value pairs, even when assigning a single property.
 * @example
 * // presume $ is the alias for ExtendedNodeList
 * $(`&lt;p>`).css({marginLeft: `12px`, color: `green`, borderLeft: `2px solid red`})
 * // the document will now contain &lt;p class="JQLCreated_[a random string]]">&lt;/p>
 * // use your own class name
 * $(`&lt;p>`).css({className: `leftRedBorder`, marginLeft: `12px`, color: `green`, borderLeft: `2px solid red`});
 * // the document will now contain &lt;p class="leftRedBorder">&lt;/p>
 * @param el {HTMLElement} (implicit) current ExtendedNodeList instance
 * @param keyOrKvPairs {Object|string} Object or string e.g. &lt;code>&amp;#123;marginRight: '12px'&amp;#125;&lt;/code>
 * or &lt;code>'margin-right'&lt;/code>
 * &lt;br>key or string may be: `paddingRight` or `"padding-right"`
 * &lt;br>&lt;b>Note&lt;/b>: if you want to use your own class name (so not a random name),
 * include a &lt;code>className&lt;/code> property in the Object. See example.
 * @param value {string|undefined} if value is not &lt;code>undefined&lt;/code>, keyOrKvPairs should be a string too
 * &lt;br>If the value should be empty (reset: e.g. &lt;code>padding: ""&lt;/code>), use a dash "-"
 * @returns {ExtendedNodeList} ExtendedNodeList instance, so chainable
 */
const css = (el, keyOrKvPairs, value) => {
  if (value &amp;&amp; keyOrKvPairs.constructor === String) {
    keyOrKvPairs = {[keyOrKvPairs]: value === "-" ? "" : value};
  }
  let nwClass = undefined;

  if (keyOrKvPairs.className) {
    nwClass = keyOrKvPairs.className;
    delete keyOrKvPairs.className;
  }

  const classExists = ([...el.classList].find(c => c.startsWith(`JQLCreated`) || nwClass &amp;&amp; c === nwClass));
  nwClass = classExists || nwClass || `JQLCreated_${String.createRandomHtmlElementId(12)}`;
  setStyle(`.${nwClass}`, keyOrKvPairs, `JQLCustomCSS`);
  el.classList.add(nwClass);
};

//#endregion collection lambda's
const extendedNodeListCollectionLamdas = {
  toggleClass, addClass, removeClass, attr, removeAttr,
  toggleAttr, toggleStyleFragments, show, hide, empty, remove,
  replaceClass, clear, setData, css, styleInline
};

export default extendedNodeListCollectionLamdas;</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Fri Oct 01 2021 14:25:41 GMT+0200 (Midden-Europese zomertijd) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
