<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>DOM.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-DOM.html">DOM</a><ul class='methods'><li data-type='method'><a href="module-DOM.html#~createElementFromHtmlString">createElementFromHtmlString</a></li><li data-type='method'><a href="module-DOM.html#~element2DOM">element2DOM</a></li><li data-type='method'><a href="module-DOM.html#~htmlToVirtualElement">htmlToVirtualElement</a></li></ul></li><li><a href="module-HandlerFactory.html">HandlerFactory</a><ul class='methods'><li data-type='method'><a href="module-HandlerFactory.html#~addListenerIfNotExisting">addListenerIfNotExisting</a></li><li data-type='method'><a href="module-HandlerFactory.html#~createHandlerForHID">createHandlerForHID</a></li><li data-type='method'><a href="module-HandlerFactory.html#~metaHandler">metaHandler</a></li></ul></li><li><a href="module-Helpers.html">Helpers</a><ul class='methods'><li data-type='method'><a href="module-Helpers.html#~time">time</a></li><li data-type='method'><a href="module-Helpers.html#~toDashedNotation">toDashedNotation</a></li></ul></li><li><a href="module-HtmlCleanup.html">HtmlCleanup</a><ul class='methods'><li data-type='method'><a href="module-HtmlCleanup.html#~setTagPermission">setTagPermission</a></li></ul></li><li><a href="module-JQL.html">JQL</a><ul class='methods'><li data-type='method'><a href="module-JQL.html#~ExtendedNodeList">ExtendedNodeList</a></li><li data-type='method'><a href="module-JQL.html#~setStyle">setStyle</a></li><li data-type='method'><a href="module-JQL.html#~virtual">virtual</a></li></ul></li><li><a href="module-JQLCollectionExtensions.html">JQLCollectionExtensions</a><ul class='methods'><li data-type='method'><a href="module-JQLCollectionExtensions.html#~addClass">addClass</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~assignAttrValues">assignAttrValues</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~attr">attr</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~clear">clear</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~css">css</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~empty">empty</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~hide">hide</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~remove">remove</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~removeAttr">removeAttr</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~removeClass">removeClass</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~replaceClass">replaceClass</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~setData">setData</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~show">show</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~styleInline">styleInline</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~toggleAttr">toggleAttr</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~toggleClass">toggleClass</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~toggleStyleFragments">toggleStyleFragments</a></li></ul></li><li><a href="module-JQLExtensionHelpers.html">JQLExtensionHelpers</a><ul class='methods'><li data-type='method'><a href="module-JQLExtensionHelpers.html#~getAllDataAttributeValues">getAllDataAttributeValues</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~hex2Full">hex2Full</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~hex2RGBA">hex2RGBA</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~initializePrototype">initializePrototype</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~isVisible">isVisible</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~loop">loop</a></li></ul></li><li><a href="module-JQLExtensions.html">JQLExtensions</a><ul class='methods'><li data-type='method'><a href="module-JQLExtensions.html#~append">append</a></li><li data-type='method'><a href="module-JQLExtensions.html#~appendTo">appendTo</a></li><li data-type='method'><a href="module-JQLExtensions.html#~delegate">delegate</a></li><li data-type='method'><a href="module-JQLExtensions.html#~each">each</a></li><li data-type='method'><a href="module-JQLExtensions.html#~find">find</a></li><li data-type='method'><a href="module-JQLExtensions.html#~find$">find$</a></li><li data-type='method'><a href="module-JQLExtensions.html#~first">first</a></li><li data-type='method'><a href="module-JQLExtensions.html#~first$">first$</a></li><li data-type='method'><a href="module-JQLExtensions.html#~getData">getData</a></li><li data-type='method'><a href="module-JQLExtensions.html#~hasClass">hasClass</a></li><li data-type='method'><a href="module-JQLExtensions.html#~html">html</a></li><li data-type='method'><a href="module-JQLExtensions.html#~htmlFor">htmlFor</a></li><li data-type='method'><a href="module-JQLExtensions.html#~insert">insert</a></li><li data-type='method'><a href="module-JQLExtensions.html#~is">is</a></li><li data-type='method'><a href="module-JQLExtensions.html#~isEmpty">isEmpty</a></li><li data-type='method'><a href="module-JQLExtensions.html#~on">on</a></li><li data-type='method'><a href="module-JQLExtensions.html#~ON">ON</a></li><li data-type='method'><a href="module-JQLExtensions.html#~outerHtml">outerHtml</a></li><li data-type='method'><a href="module-JQLExtensions.html#~parent">parent</a></li><li data-type='method'><a href="module-JQLExtensions.html#~prop">prop</a></li><li data-type='method'><a href="module-JQLExtensions.html#~replace">replace</a></li><li data-type='method'><a href="module-JQLExtensions.html#~replaceMe">replaceMe</a></li><li data-type='method'><a href="module-JQLExtensions.html#~single">single</a></li><li data-type='method'><a href="module-JQLExtensions.html#~text">text</a></li><li data-type='method'><a href="module-JQLExtensions.html#~val">val</a></li></ul></li><li><a href="module-JQLLog.html">JQLLog</a><ul class='methods'><li data-type='method'><a href="module-JQLLog.html#~JQLLog">JQLLog</a></li><li data-type='method'><a href="module-JQLLog.html#~setStyling4Log">setStyling4Log</a></li></ul></li><li><a href="module-Styling.html">Styling</a><ul class='methods'><li data-type='method'><a href="module-Styling.html#~changeCssStyleRule">changeCssStyleRule</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">DOM.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// some DOM plumbing
// noinspection JSUnresolvedVariable,JSCheckFunctionSignatures

import {
  cleanupHtml,
  getRestricted,
  setTagPermission,
  allowUnknownHtmlTags } from "./DOMCleanup.js";

/**
 * Methods for manipulating the &lt;code>Document Object [Model]&lt;/code> (aka &lt;code>DOM&lt;/code>)
 * @Module DOM
 */

/**
 * The possible positions of elements to insert (&lt;code>HTMLElement.insertAdjacent[HTML/HTMLElement]&lt;/code>).
 * @typedef adjacents
 * @property BeforeBegin {string} before element
 * @property AfterBegin {string} before first child
 * @property BeforeEnd {string} after last child
 * @property AfterEnd {string} after element
 */
const adjacents = {
  BeforeBegin: "beforebegin",
  AfterBegin: "afterbegin",
  BeforeEnd: "beforeend",
  AfterEnd: "afterend" };

/**
 * Create a HTML element from a html string in memory.
 * @param htmlString {string} The HTML string to use
 * &lt;br>&lt;b>Note&lt;/b>: the html is sanizited
 * @returns {HTMLElement|undefined} {HTMLElement|undefined}
 */
const htmlToVirtualElement = htmlString => {
  const placeholder = Object.assign(document.createElement("div"), { id:"placeholder", innerHTML: htmlString.trim() });

  return placeholder.childNodes.length
    ? cleanupHtml(placeholder)
    : undefined;
};

/**
 * Add a &lt;code>HTMLElement&lt;/code> to the document
 * @param elem {HTMLElement} The element to add
 * @param root {HTMLElement} The root element the element should be added to (default: document.body)
 * @param position {string} the position where the element must end up (default &lt;code>beforeend&lt;/code>)
 */
const element2DOM = (elem, root = document.body, position = adjacents.BeforeEnd) =>
  elem &amp;&amp; elem instanceof HTMLElement &amp;&amp; root.insertAdjacentElement(position, elem);


/**
 * Convert a html string to an instance of &lt;code>HTMLElement&lt;/code>.
 * &lt;br>&lt;b>Note&lt;/b>: the resulting element is always sanitized using the
 * attrbutes/tags settings. Use &lt;code>DOM.element2DOM&lt;/code> to fysically
 * insert/append etc. it into your DOMtree
 * @param htmlStr {string} The html to convert to &lt;code>HTMLElement&lt;/code>
 * e.g. &lt;code>&amp;lt;p id="id" class="someClass">Hello &amp;lt;span style="color: green">world&amp;lt;/span>&amp;lt;/p>&lt;/code>
 * @returns {HTMLElement|Comment} the newly created &lt;code>HTMLElement&lt;/code> instance or nothing
 * (in case of creating a html comment)
 */
const createElementFromHtmlString = htmlStr => {
  htmlStr = htmlStr.trim();
  let nwElem = htmlToVirtualElement(htmlStr);

  if (htmlStr.startsWith(`&lt;!--`) &amp;&amp; htmlStr.endsWith(`-->`)) {
    return document.createComment(htmlStr.replace(/&lt;!--|-->$/g, ''));
  }
  
  if (!nwElem.dataset.iscomment &amp;&amp; !nwElem.children.length) {
      nwElem = document.createElement("span");
      nwElem.dataset.invalid = "See comment in this element";
      nwElem.appendChild(document.createComment(`[${
        htmlStr}] => not valid or not allowed`));
  }

  return nwElem.dataset.invalid ? nwElem : nwElem.children[0];
};

export {
  getRestricted,
  setTagPermission,
  createElementFromHtmlString,
  element2DOM,
  cleanupHtml,
  allowUnknownHtmlTags,
  adjacents as insertPositions,
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Sat Oct 02 2021 11:55:58 GMT+0200 (Midden-Europese zomertijd) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
