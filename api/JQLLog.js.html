<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>JQLLog.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-DOM.html">DOM</a><ul class='methods'><li data-type='method'><a href="module-DOM.html#~createElementFromHtmlString">createElementFromHtmlString</a></li><li data-type='method'><a href="module-DOM.html#~element2DOM">element2DOM</a></li><li data-type='method'><a href="module-DOM.html#~htmlToVirtualElement">htmlToVirtualElement</a></li></ul></li><li><a href="module-HandlerFactory.html">HandlerFactory</a><ul class='methods'><li data-type='method'><a href="module-HandlerFactory.html#~addListenerIfNotExisting">addListenerIfNotExisting</a></li><li data-type='method'><a href="module-HandlerFactory.html#~createHandlerForHID">createHandlerForHID</a></li><li data-type='method'><a href="module-HandlerFactory.html#~metaHandler">metaHandler</a></li></ul></li><li><a href="module-Helpers.html">Helpers</a><ul class='methods'><li data-type='method'><a href="module-Helpers.html#~time">time</a></li><li data-type='method'><a href="module-Helpers.html#~toDashedNotation">toDashedNotation</a></li></ul></li><li><a href="module-HtmlCleanup.html">HtmlCleanup</a><ul class='methods'><li data-type='method'><a href="module-HtmlCleanup.html#~setTagPermission">setTagPermission</a></li></ul></li><li><a href="module-JQL.html">JQL</a><ul class='methods'><li data-type='method'><a href="module-JQL.html#~ExtendedNodeList">ExtendedNodeList</a></li><li data-type='method'><a href="module-JQL.html#~setStyle">setStyle</a></li><li data-type='method'><a href="module-JQL.html#~virtual">virtual</a></li></ul></li><li><a href="module-JQLCollectionExtensions.html">JQLCollectionExtensions</a><ul class='methods'><li data-type='method'><a href="module-JQLCollectionExtensions.html#~addClass">addClass</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~assignAttrValues">assignAttrValues</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~attr">attr</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~clear">clear</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~css">css</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~empty">empty</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~hide">hide</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~remove">remove</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~removeAttr">removeAttr</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~removeClass">removeClass</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~replaceClass">replaceClass</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~setData">setData</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~show">show</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~styleInline">styleInline</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~toggleAttr">toggleAttr</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~toggleClass">toggleClass</a></li><li data-type='method'><a href="module-JQLCollectionExtensions.html#~toggleStyleFragments">toggleStyleFragments</a></li></ul></li><li><a href="module-JQLExtensionHelpers.html">JQLExtensionHelpers</a><ul class='methods'><li data-type='method'><a href="module-JQLExtensionHelpers.html#~getAllDataAttributeValues">getAllDataAttributeValues</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~hex2Full">hex2Full</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~hex2RGBA">hex2RGBA</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~initializePrototype">initializePrototype</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~isVisible">isVisible</a></li><li data-type='method'><a href="module-JQLExtensionHelpers.html#~loop">loop</a></li></ul></li><li><a href="module-JQLExtensions.html">JQLExtensions</a><ul class='methods'><li data-type='method'><a href="module-JQLExtensions.html#~append">append</a></li><li data-type='method'><a href="module-JQLExtensions.html#~appendTo">appendTo</a></li><li data-type='method'><a href="module-JQLExtensions.html#~delegate">delegate</a></li><li data-type='method'><a href="module-JQLExtensions.html#~each">each</a></li><li data-type='method'><a href="module-JQLExtensions.html#~find">find</a></li><li data-type='method'><a href="module-JQLExtensions.html#~find$">find$</a></li><li data-type='method'><a href="module-JQLExtensions.html#~first">first</a></li><li data-type='method'><a href="module-JQLExtensions.html#~first$">first$</a></li><li data-type='method'><a href="module-JQLExtensions.html#~getData">getData</a></li><li data-type='method'><a href="module-JQLExtensions.html#~hasClass">hasClass</a></li><li data-type='method'><a href="module-JQLExtensions.html#~html">html</a></li><li data-type='method'><a href="module-JQLExtensions.html#~htmlFor">htmlFor</a></li><li data-type='method'><a href="module-JQLExtensions.html#~insert">insert</a></li><li data-type='method'><a href="module-JQLExtensions.html#~is">is</a></li><li data-type='method'><a href="module-JQLExtensions.html#~isEmpty">isEmpty</a></li><li data-type='method'><a href="module-JQLExtensions.html#~on">on</a></li><li data-type='method'><a href="module-JQLExtensions.html#~ON">ON</a></li><li data-type='method'><a href="module-JQLExtensions.html#~outerHtml">outerHtml</a></li><li data-type='method'><a href="module-JQLExtensions.html#~parent">parent</a></li><li data-type='method'><a href="module-JQLExtensions.html#~prop">prop</a></li><li data-type='method'><a href="module-JQLExtensions.html#~replace">replace</a></li><li data-type='method'><a href="module-JQLExtensions.html#~replaceMe">replaceMe</a></li><li data-type='method'><a href="module-JQLExtensions.html#~single">single</a></li><li data-type='method'><a href="module-JQLExtensions.html#~text">text</a></li><li data-type='method'><a href="module-JQLExtensions.html#~val">val</a></li></ul></li><li><a href="module-JQLLog.html">JQLLog</a><ul class='methods'><li data-type='method'><a href="module-JQLLog.html#~JQLLog">JQLLog</a></li><li data-type='method'><a href="module-JQLLog.html#~setStyling4Log">setStyling4Log</a></li></ul></li><li><a href="module-Styling.html">Styling</a><ul class='methods'><li data-type='method'><a href="module-Styling.html#~changeCssStyleRule">changeCssStyleRule</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">JQLLog.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// noinspection JSValidateJSDoc

/**
 * A small module for logging in a fixed positioned JQLLog box
 * &lt;br>Every line logged is preceded by the time it is logged (granularity: milliseconds)
 * The styling of the logbox happens via a &lt;code>&amp;lt;style>&lt;/code> element, added to the
 * header of the enclosing document.
 * @module JQLLog
 */
import {createElementFromHtmlString, element2DOM, insertPositions } from "./DOM.js";
import setStyle from "./Styling.js";
import {time} from "./Helpers.js";
import {isVisible} from "./JQLExtensionHelpers.js";

/**
 * defaultStyling is the styling used for a the box used for logging (a &lt;code>HTMLFieldSetElement&lt;/code> element).
 * May be overridden by your own styles, but must use the id &lt;code>#logBox&lt;/code>.
 */
let defaultStyling = {
  "#logBox": {
    minWidth: 0,
    maxWidth: 0,
    minHeight: 0,
    maxHeight: 0,
    opacity: 0,
    border: `none`,
    padding: 0,
    overflow: `hidden`,
    transition: `all 1s`,
    position: `fixed`,
  },
  "#logBox.visible": {
    backgroundColor: `white`,
    position: `relative`,
    zIndex: 5,
    opacity: 1,
    border: `1px dotted rgb(153, 153, 153)`,
    minWidth: `97vw`,
    minHeight: `20vh`,
    maxWidth: `97vw`,
    overflow: `auto`,
    maxHeight: `20vh`,
    margin: `1rem auto auto`,
    padding: `0 8px 19px 8px`,
  },
  "#logBox legend": {
    textAlign: `center`,
    backgroundColor: `rgba(119, 119, 119, 1.0)`,
    padding: `2px 10px`,
    color: `rgba(255, 255, 255, 1.0)`,
    font: `normal 12px/15px verdana, arial`,
    boxShadow: `2px 1px 10px #777`,
    borderRadius: `4px`,
  },
  "#logBox legend:before": {
    content: `'JQL Logging'`,
  },
};
let defaultStylingId = `JQLCustomCSS`;
let useLogging = false;
/**
 * Add style classes for the JQLLog box to a custom css style element.
 * @param styles {Object} style rules Object, e.g. &lt;code>&amp;#123;margin: `0`, color: `green`&amp;#125;&lt;/code>.
 * Default styles are in &lt;code>defaultStyling&lt;/code>
 * @param cssId {string} the id of the custom style element (automagically created in the
 * header of the document in which JQL is used). Default is 'JQLCustomCSS'.
 */
const setStyling4Log = (styles = defaultStyling, cssId = defaultStylingId) => {
  const exists = document.querySelector(cssId);
  // this triggers rename (id) of existing stylesheet
  if (exists) { exists.id = cssId; }
    Object.entries(styles).forEach(([selector, style]) => setStyle(selector, style, cssId));
};

let useHtml = false;

/**
 * Use logging for debug (set on/off or show/hide the JQLLog box).
 * @typedef debugLog
 * @type {Object}
 * @property {function} isVisible Is the JQLLog box visible?
 * @property {function} on Activate logging for JQL.
 * @property {function} off Deactivate logging for JQL.
 * @property {function} hide Hide the JQLLog box.
 * @property {function} show Show the JQLLog box.
 */
const debugLog = {
  isVisible() {
    const logBox = document.querySelector(`#logBox`);
    return logBox &amp;&amp; isVisible(logBox);
  },
  on() {
    useLogging = true;
    document.querySelector(`#logBox`).classList.add(`visible`);
    JQLLog(`Logging started`);
  },
  off() {
    JQLLog(`Logging stopped`);
    document.querySelector(`#logBox`).classList.remove(`visible`);
    useLogging = false;
  },
  hide() {
    const logBox = document.querySelector(`#logBox`);
    if (logBox) {
      document.querySelector(`#logBox`).classList.remove(`visible`);
    }
  },
  show() {
    const logBox = document.querySelector(`#logBox`);
    if (logBox) {
      document.querySelector(`#logBox`).classList.add(`visible`);
    }
  },
};

const createLogElement = () => {
  const loggingFieldSet = `
          &lt;fieldset id="logBox">
            &lt;legend>&lt;/legend>
            &lt;${useHtml ? `div` : `pre`} id="jql_logger">&lt;/pre>
          &lt;/fieldset>`;
  element2DOM(createElementFromHtmlString(loggingFieldSet), document.body, insertPositions.BeforeBegin);
  return document.querySelector(`#jql_logger`);
};

const logBox = document.querySelector("#jql_logger") || createLogElement();

/**
 * Create JQLLog entry/entries, preceded with the time of logging (millisecond granularity).
 * &lt;br>If the local [useLogging] boolean is false, nothing is logged
 * &lt;br> in JQL exposed as &lt;code>JQL.log&lt;/code>
 * @param args {...(string|Object)} string(s) or Object(s) to print in the JQLLog box
 * * &lt;br>&lt;b>Note&lt;/b> Objects are converted to JSON representation
 */
const JQLLog = (...args) => {
    if (!useLogging) { return; }
    const logLine = arg => `${arg instanceof Object ? JSON.stringify(arg, null, 2) : arg}\n`;
    args.forEach( arg => 
      logBox.insertAdjacentHTML(
        `afterbegin`,
        `${time()} ${logLine(arg)}`)
    );
};

const setStylingId4Log = id => defaultStylingId = id;
export { JQLLog, debugLog, setStylingId4Log, setStyling4Log };</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Thu Oct 07 2021 15:25:45 GMT+0200 (Midden-Europese zomertijd) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
